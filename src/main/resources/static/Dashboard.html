<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>PakMail</title>
	<!-- DataTables -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
	<!-- core:css -->
	<link rel="stylesheet" href="../assets/vendors/core/core.css">
	<!-- endinject -->
	<!-- plugin css for this page -->
	<link rel="stylesheet" href="../assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css">
	<!-- end plugin css for this page -->
	<!-- inject:css -->
	<link rel="stylesheet" href="../assets/fonts/feather-font/css/iconfont.css">
	<link rel="stylesheet" href="../assets/vendors/flag-icon-css/css/flag-icon.min.css">
	<!-- endinject -->
	<!-- Layout styles -->
	<link rel="stylesheet" href="../assets/css/demo_2/style.css">
	<!-- End layout styles -->
	<link rel="shortcut icon" href="../assets/images/favicon.png" />
</head>

<body>
	<div class="main-wrapper">

		<!-- partial:partials/_sidebar.html -->
		<nav class="sidebar">
			<div class="sidebar-header">
				<a href="index.html" class="sidebar-brand">
					Pak<span style="font-weight: bold">Mail</span>
				</a>
				<div class="sidebar-toggler not-active">
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>

			<!--Inicio sidebar-->
			<div class="sidebar-body">
				<ul class="nav">
					<li class="nav-item nav-category">Main</li>
					<li class="nav-item">
						<a href="/dashboard" class="nav-link">
							<i class="link-icon" data-feather="box"></i>
							<span class="link-title">Dashboard</span>
						</a>
					</li>

					<li class="nav-item">
						<a href="/tabla" class="nav-link">
							<i class="link-icon" data-feather="box"></i>
							<span class="link-title">Tabla General</span>
						</a>
					</li>

					<li class="nav-item">
						<a href="/dropzone" class="nav-link">
							<i class="link-icon" data-feather="box"></i>
							<span class="link-title">Carga</span>
						</a>
					</li>
					<li class="nav-item nav-category">Funciones</li>
					<li class="nav-item">
						<a href="/enviosxmensajeria" class="nav-link" role="button" aria-expanded="false"
							aria-controls="emails">
							<i class="link-icon" data-feather="mail"></i>
							<span class="link-title">Envios Mensajeria</span>
						</a>
						<br>
					</li>
					<li class="nav-item">
						<a href="/enviosxcliente" class="nav-link" role="button" aria-expanded="false"
						   aria-controls="emails">
							<i class="link-icon" data-feather="mail"></i>
							<span class="link-title">Envios Cliente</span>
						</a>
						<br>
					</li>
					<li class="nav-item">
						<a href="/enviosxfcontactosucursal" class="nav-link">
							<i class="link-icon" data-feather="message-square"></i>
							<span class="link-title">Envios Contacto-Sucursal</span>
						</a>
					</li>
					<br>
					<li class="nav-item">
						<a href="/enviosxtservicio" class="nav-link">
							<i class="link-icon" data-feather="calendar"></i>
							<span class="link-title">Envios servicio<br> Mensajeria-Fecha</span>
						</a>
					</li>
				</ul>
			</div>
		</nav>

		<!--No mover-->
		<nav class="settings-sidebar">
			<div class="sidebar-body">
				<div class="theme-wrapper">
					</a>
				</div>
			</div>
		</nav>
		<!--No mover-->
		<!-- partial -->
		<div class="page-wrapper">
			<!-- partial:partials/_navbar.html -->
			<nav class="navbar">

			</nav>
			<!-- partial -->
			<div class="container">
				<div class="page-content">
					<div class="d-flex justify-content-between align-items-center flex-wrap grid-margin">
						<div>
							<h4 class="mb-3 mb-md-0">Tabla </h4>
						</div>
						<div class="d-flex align-items-center flex-wrap text-nowrap">
							<button type="button" class="btn btn-primary btn-icon-text mb-2 mb-md-0">
								<i class="btn-icon-prepend" data-feather="download-cloud"></i>
								Generar Reporte
							</button>
						</div>
					</div>

					<!--Form empresa-->
					<div class="form-group">
						<label>Selecciona Mensajeria</label>
						<select class="js-example-basic-single w-100" id="vmensajeria">
							<option value="MULTIPACK">MULTIPACK</option>
							<option value="UPS INT">UPS INT</option>
							<option value="UPS NAL">UPS NAL</option>
							<option value="DHL INT">DHL INT</option>
							<option value="DHL NACIONAL">DHL NACIONAL</option>
							<option value="DHL">DHL</option>
							<option value="FEDEX">FEDEX</option>
							<option value="FEDEX NAL">FEDEX NAL</option>
							<option value="ESTAFETA">ESTAFETA</option>
							<option value="MEXPOST">MEXPOST</option>
							<option value="PAQUETEXPRESS">PAQUETEXPRESS</option>
							<option value="REDPACK">REDPACK</option>
							<option value="PEGASO">PEGASO</option>
							<option value="AEROFLASH">AEROFLASH</option>
							<option value="ALMEX">ALMEX</option>
						</select>
						<br>

						<!--Aqui va el footer y la tabla-->

				<table class="display" style="width:100%" id="mensajeria" >
					<thead>
						<tr>
							<th>
								Fecha de envio
							</th>
							<th>
								Destino
							</th>
							<th>
								Mensajeria
							</th>
							<th>
								Tipo de Servicio
							</th>
							<th>
								Costo
							</th>
							<th>
								Sucursal
							</th>
							<th>
								Cliente
							</th>
							<th>
								Tipo de Envio
							</th>
							<th>
								Forma de Contacto
							</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td> </td>
							<td> </td>
							<td> </td>
							<td> </td>
							<td> </td>
							<td> </td>
							<td> </td>
							<td> </td>
							<td> </td>
						</tr>

					</tbody>
				</table>

				<!--fin tabla-->
			</div>
		</div>
	<br><br>

				<!--Enmedio-->
	</div>
</div>

		<!-- core:js -->
		<script src="../assets/vendors/core/core.js"></script>
		<!-- endinject -->
		<!-- plugin js for this page -->
		<script src="../assets/vendors/chartjs/Chart.min.js"></script>
		<script src="../assets/vendors/jquery.flot/jquery.flot.js"></script>
		<script src="../assets/vendors/jquery.flot/jquery.flot.resize.js"></script>
		<script src="../assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
		<script src="../assets/vendors/apexcharts/apexcharts.min.js"></script>
		<script src="../assets/vendors/progressbar.js/progressbar.min.js"></script>
		<!-- end plugin js for this page -->
		<!-- inject:js -->
		<script src="../assets/vendors/feather-icons/feather.min.js"></script>
		<script src="../assets/js/template.js"></script>
		<!-- endinject -->
		<!-- custom js for this page -->
		<script src="../assets/js/dashboard.js"></script>
		<script src="../assets/js/datepicker.js"></script>
		<!-- DataTables -->
		<script type="text/javascript" charset="utf8"
			src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>

		<script>
			$(document).ready(function () {

				$(function getMensajeria() {
					$("#vmensajeria").change(function () {
						var mensajeriaseleccionada = $("#vmensajeria option:selected").text();
						console.log(mensajeriaseleccionada)
						cargarPorMensajeria(mensajeriaseleccionada)
					})
				})

				async function cargarPorMensajeria(mensajeriaseleccionada) {
					const respuesta = await fetch('envios/' + mensajeriaseleccionada, {
						method: 'GET',
						headers: {
							'Accept': 'application/json',
							'Content-Type': 'application/json'
						}
					});
					let content = await respuesta.json();
					console.log(content);

					//dataTable
					$('#mensajeria').DataTable({
						'destroy': true,
						"pageLength": 5,
						'data': content,
						'columns': [
							{ 'data': 'fecha_envio' },
							{ 'data': 'destino' },
							{ 'data': 'mensajeria' },
							{ 'data': 'tipo_de_servicio' },
							{ 'data': 'costo' },
							{ 'data': 'sucursal' },
							{ 'data': 'cliente' },
							{ 'data': 'tipo_de_envio' },
							{ 'data': 'forma_de_contacto' },
						],
					});

				}
			});
		</script>
</body>

</html>